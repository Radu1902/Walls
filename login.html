
<!DOCTYPE html>
<html>
<head>
<title>User login</title>
<style>
	html {
  		line-height: 1.625;
  		color: "light gray";
  		font-family: 'Comic Sans MS';
        display: table;
        margin: auto;
	}
    body {
    	display: table-cell;
        vertical-align: center;
    }
    div {
    	background-color: lightgray;
        border: 3px solid black;
        padding: 30px;
        width: 300px;
        margin: 30px;
    }
    label {
    	display: inline-block;
    	font-size: larger;
        text-align: right;
    }
    input {
    	display: inline-block;
    }
    h1 {
    	color: multicolor;
    }


</style>


</head>
<body>

<h1>Login</h1>
<div>
<label>Username:</label>
<input id="userInput"/>
<label>Password:</label>
<input id="passInput"/>
<button id="loginButton" onclick="onLogin()">Log in</button>
<button id="registerButton" onclick="onRegister()">Register</button>
<br/>
<label id="loginMessage"></label>
<label id="dspl"></label>

</div>

<script>
	async function onRegister()
    {
        const username = document.getElementById("UserInput").innerHTML
        const password = document.getElementById("passInput").innerHTML
        const credentials = username + " " + password
        const response = await fetch("http://localhost:8080/register", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(credentials)
        })
        document.getElementById("dspl").innerHTML = response.ok
    }
	async function onLogin()
    {
        const promise = await fetch("http://localhost:8080/auth")
        const text = await promise.text()
        if (text % 3 == 0)
        {
        	document.getElementById("loginMessage").innerHTML = "Login successful";
        }
        else if (text % 3 == 1)
        {
			document.getElementById("loginMessage").innerHTML = "Server error.";
        }
        else
        {
			document.getElementById("loginMessage").innerHTML = "Username or password invalid.";
        }

        const promisse = await fetch("http://localhost:8080/user")
        const texts = await promisse.text()
        const jsonny = await JSON.parse(texts)
        document.getElementById("dspl").innerHTML = jsonny.Blog
    }
    
    
</script>


</body>
</html>